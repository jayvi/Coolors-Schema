!function(){"use strict";function e(e,t){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?t(r):alert("Request failed.  Returned status of "+r.status)},r.send()}var t=document.getElementById("color-panels"),r="";r=t&&t.getAttribute("data-template-url")?t.getAttribute("data-template-url"):"templates/color-pane.html",e(r,function(e){for(var t,r=document.querySelectorAll("[color-pane]"),n=[],s=window.innerHeight-document.getElementById("header").getBoundingClientRect().height-5+"px",i=function(e){e.refreshSliders(),e.hsvSliders.h.refresh(),e.hsvSliders.s.refresh(),e.hsvSliders.v.refresh(),e.rgbSliders.r.refresh(),e.rgbSliders.g.refresh(),e.rgbSliders.b.refresh(),e.cmykSliders.c.refresh(),e.cmykSliders.m.refresh(),e.cmykSliders.y.refresh(),e.cmykSliders.k.refresh(),e.pickerHandleBounds=e.pickerHandle.getBoundingClientRect(),e.pickingAreaBounds=e.pickingArea.getBoundingClientRect(),e.refreshPicker(),e.pickerHueSlider.refresh(),e.updateGradients()},l=function(l){var a=r[l];a.innerHTML=e.responseText;var o=a.children[0];a.style.height=s,o.style.height=s;var d,c=a.querySelector(".hex > input"),u=a.querySelector(".color-info-cmyk"),h=a.querySelector(".adjust.option"),g=a.querySelector(".adjust-tab"),m=a.querySelector(".shades.option"),v=a.querySelector(".shades-container"),y=v.querySelectorAll(".shade-item");c.addEventListener("click",function(){this.focus(),Utils.inputSelectionRange(this,1,7)}),c.addEventListener("keyup",function(e){var t=String.fromCharCode(e.keyCode);(/[a-zA-Z0-9]/.test(t)||8==e.keyCode||46==e.keyCode)&&d.updateFromHex(this.value)});var f=function(){o.style.background=this.hex,c.value=this.hex,u.innerHTML=this.cmyk.toString(),this.hsv.v>.5?Utils.addClass(a,"light"):Utils.removeClass(a,"light")};d=new ColorPicker(a.getElementsByClassName("color-picker")[0],{hex:a.getAttribute("hex"),sliders:{hue:{h:a.getElementsByClassName("hsb-h-slider")[0],s:a.getElementsByClassName("hsb-s-slider")[0],v:a.getElementsByClassName("hsb-v-slider")[0]},rgb:{r:a.getElementsByClassName("rgb-r-slider")[0],g:a.getElementsByClassName("rgb-g-slider")[0],b:a.getElementsByClassName("rgb-b-slider")[0]},cmyk:{c:a.getElementsByClassName("cmyk-c-slider")[0],m:a.getElementsByClassName("cmyk-m-slider")[0],y:a.getElementsByClassName("cmyk-y-slider")[0],k:a.getElementsByClassName("cmyk-k-slider")[0]}},onInit:f,onChange:f}),n.push(d),new Tabs(g,{onChange:function(){i(d)}}),h.addEventListener("click",function(){t||(t=document.querySelectorAll(".adjust-tab")),Utils.each(t,function(e,t){Utils.removeClass(t,"active")}),Utils.addClass(g,"active"),i(d)}),document.addEventListener("click",function(e){Utils.isDescendantOrSelfOf(e.target,g)||Utils.isDescendantOrSelfOf(e.target,h)||Utils.removeClass(g,"active")}),m.addEventListener("click",function(){Utils.addClass(v,"active");for(var e=function(e,t){e.style.background=t.toString();var r=ColorConverter.rgb2hex(t);e.innerHTML="<div>"+r+"</div>",e.addEventListener("click",function(){d.updateFromHex(r),Utils.removeClass(v,"active")})},t=new ColorConverter.RGB(0,0,0),r=y.length-1,n=.09,s=0;s<10;s++){var i=s*n+n;t.r=Math.round(d.rgb.r*i),t.g=Math.round(d.rgb.g*i),t.b=Math.round(d.rgb.b*i),e(y[r--],t)}e(y[(y.length-1)/2],d.rgb);for(var l=0;l<10;l++){var a=l*n+n;t.r=Math.round(d.rgb.r+(255-d.rgb.r)*a),t.g=Math.round(d.rgb.g+(255-d.rgb.g)*a),t.b=Math.round(d.rgb.b+(255-d.rgb.b)*a),e(y[9-l],t),r--}})},a=0;a<r.length;a++)l(a);var o=function(){for(var e=Math.random(),t=0;t<n.length;t++)n[t].update(new ColorConverter.HSV(e,Math.random(),Math.random())),i(n[t])};document.addEventListener("keyup",function(e){32==e.keyCode&&o()});var d=null;window.onresize=function(){null!==d&&clearTimeout(d),d=setTimeout(function(){for(var e=window.innerHeight-document.getElementById("header").getBoundingClientRect().height-5+"px",t=0;t<r.length;t++){var n=r[t],s=n.children[0];n.style.height=e,s.style.height=e}},500)}})}();